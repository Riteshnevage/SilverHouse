<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>My Orders | Vithai SilverHouse</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/lucide@latest"></script>
</head>

<body class="bg-gray-100 font-[Poppins] text-gray-900">
  
  <!-- Navbar -->
  <header class="bg-white shadow p-4 sticky top-0 z-50">
    <div class="max-w-6xl mx-auto flex justify-between items-center">
      <h1 class="text-xl font-bold text-purple-700">Vithai SilverHouse</h1>
      <a href="Products.html" class="text-sm text-purple-600 hover:underline">Shop More</a>
    </div>
  </header>

  <main class="max-w-5xl mx-auto p-4">
    <h2 class="text-xl font-semibold mb-4">My Orders</h2>

    <div id="ordersList" class="space-y-6"></div>

  </main>

  <footer class="text-center text-xs text-gray-500 py-4">
    © 2025 Vithai SilverHouse
  </footer>

  <script>
    const steps = [
      { status: "Order Placed", icon: "shopping-bag" },
      { status: "Packed", icon: "package" },
      { status: "Shipped", icon: "truck" },
      { status: "Out for Delivery", icon: "map-pin" },
      { status: "Delivered", icon: "check-circle" }
    ];

    function loadOrders() {
      const orders = JSON.parse(localStorage.getItem("orders")) || [];
      const container = document.getElementById("ordersList");

      if (!orders.length) {
        container.innerHTML = `
          <p class="text-center text-gray-500 mt-10">No orders yet!</p>`;
        return;
      }

      container.innerHTML = orders.map(order => `
        <div class="bg-white rounded-xl shadow p-4 flex gap-4 items-start relative">
          <!-- Product Image -->
          <img src="${order.img}" class="w-24 h-24 rounded-lg object-cover shadow" />

          <!-- Details -->
          <div class="flex-1">
            <h3 class="font-semibold">${order.name}</h3>
            <p class="text-sm text-gray-600">₹${order.price}</p>
            <p class="text-xs text-gray-500 mt-1">${order.date || ""}</p>

            <!-- Progress Tracking -->
            <div class="mt-4 flex items-center gap-3">
              ${steps.map((step, idx) => `
                <div class="flex flex-col items-center text-center">
                  <i data-lucide="${step.icon}" 
                     class="w-6 h-6 ${idx <= order.statusIndex ? 'text-green-600' : 'text-gray-400'}">
                  </i>
                  <span class="text-[10px] mt-1 ${idx <= order.statusIndex ? 'text-green-600' : 'text-gray-400'}">
                    ${step.status}
                  </span>
                </div>
              `).join('') }
            </div>

          </div>
        </div>
      `).join('');

      lucide.createIcons();
      animateTracking();
    }

    function animateTracking() {
      const orders = JSON.parse(localStorage.getItem("orders")) || [];
      let changed = false;
    
      orders.forEach(order => {
        if (order.statusIndex < 4) {
          order.statusIndex++;
          changed = true;
        }
      });

      if (changed) {
        localStorage.setItem("orders", JSON.stringify(orders));
        setTimeout(loadOrders, 2000);
      }
    }
 
    loadOrders();
  </script>
</body>
</html>
